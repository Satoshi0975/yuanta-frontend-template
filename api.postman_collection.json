{
	"info": {
		"_postman_id": "d9ca9ffc-08c7-44c7-a472-e66c8d96312b",
		"name": "元大證券 MVC 2025-4 API Collection",
		"description": "元大證券 MVC 2025-4 專案的 API 測試集合",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "6404356"
	},
	"item": [
		{
			"name": "驗證碼相關",
			"item": [
				{
					"name": "取得驗證碼",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/captcha",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"captcha"
							]
						},
						"description": "取得驗證碼圖片（PNG 格式）"
					},
					"response": []
				}
			]
		},
		{
			"name": "使用者登入",
			"item": [
				{
					"name": "期貨登入",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"{{futures}}\",\n  \"password\": \"{{LoginPassword}}\",\n  \"captcha\": \"ABCE\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/futures",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"futures"
							]
						},
						"description": "期貨使用者登入，成功後會設定 SessionToken Cookie"
					},
					"response": [
						{
							"name": "登入成功",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"username\": \"{{futures}}\",\n  \"password\": \"{{LoginPassword}}\",\n  \"captcha\": \"ABCE\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/futures",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"futures"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"登入成功\",\n  \"data\": {\n    \"user\": {\n      \"username\": \"testuser\",\n      \"name\": \"測試使用者\",\n      \"userId\": \"A123456789\"\n    },\n    \"accounts\": [\n      {\n        \"accountId\": \"F021000-1234567\",\n        \"accountName\": \"測試帳戶\"\n      }\n    ]\n  }\n}"
						}
					]
				},
				{
					"name": "槓桿登入",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"{{leverage}}\",\n  \"password\": \"{{LoginPassword}}\",\n  \"captcha\": \"ABCE\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/leverage",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"leverage"
							]
						},
						"description": "槓桿使用者登入，成功後會設定 SessionToken Cookie"
					},
					"response": []
				}
			]
		},
		{
			"name": "報名相關",
			"item": [
				{
					"name": "檢查暱稱可用性",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/registration/check-nickname/{{nickname}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"registration",
								"check-nickname",
								"{{nickname}}"
							]
						},
						"description": "檢查暱稱是否已被使用，暱稱限制：僅英文數字，最長40字元"
					},
					"response": [
						{
							"name": "暱稱可用",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/api/registration/check-nickname/testuser123",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"registration",
										"check-nickname",
										"testuser123"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"成功\",\n  \"data\": {\n    \"nickname\": \"testuser123\",\n    \"isAvailable\": true,\n    \"message\": \"暱稱可以使用\"\n  }\n}"
						}
					]
				},
				{
					"name": "參賽者報名",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"fullAccount\": \"F021000-1234567\",\n  \"nickname\": \"testuser123\",\n  \"captcha\": \"captcha_code\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/registration/register",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"registration",
								"register"
							]
						},
						"description": "參賽者報名，需要先登入取得 SessionToken Cookie。\\n\\n注意事項：\\n- fullAccount 格式：分公司碼-期貨帳號（如 F021000-1234567）\\n- nickname 僅限英文數字，最長40字元\\n- 需要提供驗證碼"
					},
					"response": [
						{
							"name": "報名成功",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"fullAccount\": \"F021000-1234567\",\n  \"nickname\": \"testuser123\",\n  \"captcha\": \"1234\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/registration/register",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"registration",
										"register"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"報名成功\",\n  \"data\": {\n    \"id\": 123,\n    \"nickname\": \"testuser123\",\n    \"fullAccount\": \"F021000-1234567\",\n    \"registrationTime\": \"2025-09-13T10:30:00Z\"\n  }\n}"
						}
					]
				}
			]
		},
		{
			"name": "投票相關",
			"item": [
				{
					"name": "搜尋參賽者",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/vote/participants?keyword={{keyword}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"vote",
								"participants"
							],
							"query": [
								{
									"key": "keyword",
									"value": "{{keyword}}",
									"description": "搜尋關鍵字（可選，支援姓名或ID搜尋）"
								}
							]
						},
						"description": "搜尋參賽者，支援關鍵字搜尋（姓名或ID），不提供關鍵字則回傳前10名"
					},
					"response": [
						{
							"name": "搜尋成功",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/api/vote/participants?keyword=測試",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"vote",
										"participants"
									],
									"query": [
										{
											"key": "keyword",
											"value": "測試"
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"查詢成功\",\n  \"data\": [\n    {\n      \"id\": 1,\n      \"nickname\": \"測試參賽者1\"\n    },\n    {\n      \"id\": 2,\n      \"nickname\": \"測試參賽者2\"\n    }\n  ],\n  \"timestamp\": \"2025-09-14T02:00:00Z\"\n}"
						}
					]
				},
				{
					"name": "投票",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"voterName\": \"投票者姓名\",\n  \"voterPhone\": \"0912345678\",\n  \"hasFuturesAccount\": true,\n  \"potentialCustomerType\": \"證券轉期貨\",\n  \"participantId\": 1,\n  \"captchaCode\": \"驗證碼\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/vote",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"vote"
							]
						},
						"description": "投票 API，包含驗證碼驗證和每日電話號碼限制\\n\\n限制說明：\\n- 需要正確的驗證碼\\n- 同一電話號碼每天只能投票一次\\n- 參賽者必須存在\\n\\n欄位說明：\\n- voterName: 投票者姓名（必填，最多50字元）\\n- voterPhone: 手機號碼（必填，格式：09xxxxxxxx）\\n- hasFuturesAccount: 是否有期貨帳戶（必填）\\n- potentialCustomerType: 潛在客戶類型（選填，如：證券轉期貨/無興趣/台北/新竹/台中/台南/高雄）\\n- participantId: 參賽者ID（必填）\\n- captchaCode: 驗證碼（必填）"
					},
					"response": [
						{
							"name": "投票成功",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"voterName\": \"測試投票者\",\n  \"voterPhone\": \"0912345678\",\n  \"hasFuturesAccount\": true,\n  \"potentialCustomerType\": \"證券轉期貨\",\n  \"participantId\": 1,\n  \"captchaCode\": \"1234\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/vote",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"vote"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"投票成功\",\n  \"timestamp\": \"2025-09-14T02:00:00Z\"\n}"
						},
						{
							"name": "驗證碼錯誤",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"voterName\": \"測試投票者\",\n  \"voterPhone\": \"0912345678\",\n  \"hasFuturesAccount\": true,\n  \"potentialCustomerType\": \"證券轉期貨\",\n  \"participantId\": 1,\n  \"captchaCode\": \"錯誤驗證碼\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/vote",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"vote"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": false,\n  \"message\": \"驗證碼錯誤\",\n  \"errorCode\": \"VOTE_FAILED\",\n  \"timestamp\": \"2025-09-14T02:00:00Z\"\n}"
						},
						{
							"name": "每日投票限制",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"voterName\": \"測試投票者\",\n  \"voterPhone\": \"0912345678\",\n  \"hasFuturesAccount\": true,\n  \"potentialCustomerType\": \"證券轉期貨\",\n  \"participantId\": 1,\n  \"captchaCode\": \"1234\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/vote",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"vote"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": false,\n  \"message\": \"同一電話號碼每天只能投票一次\",\n  \"errorCode\": \"VOTE_FAILED\",\n  \"timestamp\": \"2025-09-14T02:00:00Z\"\n}"
						}
					]
				},
				{
					"name": "取得投票排行榜",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/vote/ranking",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"vote",
								"ranking"
							]
						},
						"description": "取得票數最高前10名參賽者排行榜"
					},
					"response": [
						{
							"name": "排行榜查詢成功",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/api/vote/ranking",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"vote",
										"ranking"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"查詢成功\",\n  \"data\": [\n    {\n      \"participantId\": 1,\n      \"nickname\": \"第一名參賽者\",\n      \"voteCount\": 1250\n    },\n    {\n      \"participantId\": 2,\n      \"nickname\": \"第二名參賽者\",\n      \"voteCount\": 980\n    },\n    {\n      \"participantId\": 3,\n      \"nickname\": \"第三名參賽者\",\n      \"voteCount\": 756\n    }\n  ],\n  \"timestamp\": \"2025-09-14T02:00:00Z\"\n}"
						}
					]
				}
			]
		},
		{
			"name": "個人成績查詢",
			"item": [
				{
					"name": "查詢個人參賽成績",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{baseUrl}}/api/record/12345",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"record",
								"12345"
							]
						},
						"description": "查詢個人參賽成績，不需要登入\\n\\n欄位說明：\\n- fullAccount: 完整期貨帳號（格式：分公司碼-帳號，如 F021000-1234567）\\n- captcha: 驗證碼"
					},
					"response": [
						{
							"name": "查詢成功",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"fullAccount\": \"F021000-1234567\",\n  \"captcha\": \"1234\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/api/record",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"record"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"查詢成功\",\n  \"data\": {\n    \"nickname\": \"參賽者暱稱\",\n    \"fullAccount\": \"F021000-1234567\",\n    \"totalReturn\": 15.67,\n    \"ranking\": 25,\n    \"participantCount\": 500,\n    \"lastUpdateTime\": \"2025-09-14T02:00:00Z\"\n  },\n  \"timestamp\": \"2025-09-14T02:00:00Z\"\n}"
						}
					]
				}
			]
		},
		{
			"name": "系統資訊",
			"item": [
				{
					"name": "取得版本資訊",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/version",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"version"
							]
						},
						"description": "取得系統版本資訊"
					},
					"response": [
						{
							"name": "版本資訊",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{baseUrl}}/api/version",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"version"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": true,\n  \"message\": \"版本資訊獲取成功\",\n  \"data\": {\n    \"version\": \"2.0.0\"\n  }\n}"
						}
					]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "https://localhost:5001",
			"description": "API 基礎 URL，請根據實際環境調整"
		},
		{
			"key": "nickname",
			"value": "testuser123",
			"description": "測試用暱稱"
		},
		{
			"key": "keyword",
			"value": "測試",
			"description": "參賽者搜尋關鍵字"
		},
		{
			"key": "futures",
			"value": "A1234567890",
			"description": "期貨帳號"
		},
		{
			"key": "leverage",
			"value": "A1234567890",
			"description": "槓桿帳號"
		},
		{
			"key": "LoginPassword",
			"value": "1234",
			"description": "測試站密碼"
		}
	]
}